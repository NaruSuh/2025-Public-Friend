# SlavaTalk 앱 코드 감사 및 바톤터치 문서

**작성일:** 2025년 10월 17일
**작성자:** Gemini

## 1. 개요

`slava_talk` 애플리케이션에 대한 코드 감사를 수행한 결과, 몇 가지 개선점과 함께 앱의 구동을 불가능하게 하는 치명적인 문제를 발견했습니다. 본 문서는 해당 문제들의 상세 내용과 후속 개발자가 작업을 이어받아 프로젝트를 정상화하고 발전시키기 위한 권장 사항을 기술합니다.

---

## 2. 치명적 오류 (CRITICAL ISSUE)

### 문제: 핵심 모듈 `modules/vocab_manager.py` 부재

- **현상:** 앱의 모든 페이지(`Document_Study`, `Quiz`, `AI_Tutor` 등)는 `modules/data_loader.py`를 통해 데이터를 불러옵니다. 그러나 현재 `data_loader.py`는 실제 로직 없이 `modules/vocab_manager.py`라는 다른 파일의 함수들을 재호출(re-export)하는 역할만 하고 있습니다. 문제는, 이 핵심적인 `vocab_manager.py` 파일이 프로젝트 내에 존재하지 않는다는 것입니다.
- **영향:** 이 파일의 부재로 인해 `load_vocab`, `filter_vocab`, `get_topics` 등 데이터 처리에 필수적인 모든 함수 호출이 실패합니다. **결론적으로 현재 앱은 어떠한 기능도 정상적으로 작동하지 않는 상태입니다.**

### 권장 해결책

1.  **`vocab_manager.py` 파일 복원 또는 재작성:**
    - 백업이나 이전 버전 관리 시스템에서 해당 파일을 찾아 복원하는 것이 최선입니다.
    - 복원이 불가능할 경우, 다른 페이지들의 코드를 역추적하여 `vocab_manager.py`가 수행해야 할 기능들을 재작성해야 합니다. 필요한 함수는 최소한 다음과 같습니다.
        - `load_vocab()`: `data/vocabulary.json` 파일을 읽고 캐싱(@st.cache_data)하여 반환하는 함수.
        - `save_vocab()`: 단어장 데이터를 `data/vocabulary.json`에 저장하는 함수.
        - `get_topics()`: 전체 단어장에서 고유한 토픽 목록을 추출하는 함수.
        - `filter_vocab()`: 검색어, 토픽, 소스 등을 기준으로 단어장을 필터링하는 함수.

---

## 3. 기능 개선 및 확장 제안 (ENHANCEMENT)

### 문제: 원시적인 PDF 처리 로직 (`pdf_processor.py`)

- **현상:** 현재의 PDF 처리기는 사전에 하드코딩된 15개의 키워드 목록에만 의존하여 문서를 검색합니다. 이는 앱의 UI에서 광고하는 "AI 기반 농축(Enrich)", "라이브 크롤링" 등의 지능적인 기능과는 큰 격차가 있습니다.
- **한계:**
    1.  **확장성 부재:** 새로운 문서나 토픽이 추가될 때마다 개발자가 직접 코드를 수정하여 키워드를 추가해야 합니다.
    2.  **번역 부재:** 예문 번역이 `(Translation not available...)`로 하드코딩되어 있어 실제 학습 가치가 떨어집니다.
    3.  **단순한 문장 분리:** 정규식을 이용한 문장 분리는 복잡한 문장 구조에서 오류를 일으킬 가능성이 높습니다.

### 권장 해결책

`pdf_processor.py`를 다음과 같이 전면적으로 재설계할 것을 제안합니다.

1.  **자연어 처리(NLP) 라이브러리 도입:**
    - `spaCy` 또는 `NLTK`와 같은 라이브러리를 도입하여, 단순 키워드 매칭이 아닌 **품사 태깅(POS-tagging), 명사구 추출, 개체명 인식(NER)** 등 고도화된 방식으로 문서의 핵심 어휘를 자동으로 식별하도록 개선해야 합니다.

2.  **번역 API 연동:**
    - `st.secrets`에 저장된 API 키를 활용하여, Google Translate, DeepL, 또는 OpenAI GPT-4의 번역 기능을 `pdf_processor.py`에 통합해야 합니다. 이를 통해 추출된 예문에 대한 정확한 영어/한국어 번역을 자동으로 생성할 수 있습니다.

3.  **웹 크롤링 기능 추가:**
    - `BeautifulSoup`, `requests` 라이브러리를 사용하여, `Vocabulary_Builder.py` 페이지에서 사용자가 입력한 URL(예: 우크라이나 정부 공식 브리핑)의 텍스트를 직접 크롤링하고, 위 1, 2번 과정을 거쳐 단어장을 실시간으로 보강하는 기능을 구현해야 합니다.

---

## 4. 기타 개선 사항

- **퀴즈 페이지 상태 관리:** `pages/2_❓_Quiz.py`의 상태 관리 로직(질문 제출, 다음 문제 전환 등)이 다소 복잡합니다. 현재는 정상 작동하지만, 기능이 더 추가될 경우를 대비하여 `st.form`의 콜백(callback) 함수를 사용하는 등 더 간결한 형태로 리팩토링하는 것을 고려할 수 있습니다.

본 문서를 통해 후속 개발자가 프로젝트의 현 상태를 명확히 파악하고, 우선순위에 따라 작업을 진행하여 `SlavaTalk` 앱을 성공적으로 완성시키기를 기대합니다.
